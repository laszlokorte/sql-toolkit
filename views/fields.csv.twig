{% macro template(template, record, templateRenderer, link) %}
	{{ template.render(record, templateRenderer, link)|raw }}
{% endmacro %}

{% macro text(field, record) %}
    {{ record[field.column('value')] }}
{% endmacro %}

{% macro ref_parent(field, record, templateRenderer) %}
	{% if record.foreignId(field.parent('ref')) %}
	{{ _self.template(field.parent('ref').targetEntity.displayTemplateCompiled, record, templateRenderer, field.parent('ref').toLink) }}
	{% endif %}
{% endmacro %}

{% macro ref_children(field, record) %}
	{{ record.count(field.child('ref')) }}
{% endmacro %}

{% macro datetime(field, record) %}
	{% if record[field.column('value')] %}
    {{ record[field.column('value')]|date('d.m.Y H:i') }}
    {% endif %}
{% endmacro %}

{% macro date(field, record) %}
	{% if record[field.column('value')] %}
    {{ record[field.column('value')]|date('d.m.Y') }}
    {% endif %}
{% endmacro %}

{% macro time(field, record) %}
    {% if field.type.includesSeconds %}
    	{{ record[field.column('value')]|date('H:i:s') }}
	{% else %}
	    {{ record[field.column('value')]|date('H:i') }}
    {% endif %}
{% endmacro %}

{% macro number(field, record) %}
    {{ record[field.column('value')] }}
{% endmacro %}

{% macro choice(field, record) %}
    {{ record[field.column('value')] }}
{% endmacro %}